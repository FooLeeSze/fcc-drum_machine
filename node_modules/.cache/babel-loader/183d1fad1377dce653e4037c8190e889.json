{"ast":null,"code":"import _slicedToArray from\"C:/Users/Lee Sze/Documents/fcc-frontend-lib-proj/drum_machine/drum_machine/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{updateDisplay}from'../actions/display';import{displayTextLibrary}from'../utils/constants';import{drumPadActiveStyle,drumPadNormalStyle}from'../utils/constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DrumPad(props){// Local state to activate pad (for styling)\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),active=_React$useState2[0],setActive=_React$useState2[1];// Access audio files & volume state in Redux store\nvar dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.audioFiles;}),libNum=_useSelector.libNum,audioFiles=_useSelector.audioFiles;var volume=useSelector(function(state){return state.volume;});var power=useSelector(function(state){return state.power;});// Function to play sound and update display text state upon activation\nfunction activatePad(id){if(power){// Update display text\ndispatch(updateDisplay(displayTextLibrary[libNum][id]));var elem=document.getElementById(id);// Load audio and volume, then play\nelem.currentTime=0;elem.load();elem.volume=Number(volume)/100;elem.play();}// Activate pad (for styling)\nsetActive(true);}// Function to activate pad on mouse down\nfunction handleClick(event){var id=event.target.id.split('-')[0];activatePad(id);}// Function to deactivate pad (for styling)\nfunction handleDeactivate(){setActive(false);}// Function to activate pad on key down\nfunction handleKeyDown(event){var key=event.key;var keyCode=props.id.toLowerCase();if(key===keyCode||key===keyCode.toUpperCase()){var id=key.toUpperCase();activatePad(id);setTimeout(function(){return setActive(false);},100);}}// Function to stop audio playing\nfunction stopSound(){var elem=document.getElementById(props.id);elem.pause();}// Listen/stop listening for keydown on power on/off\nuseEffect(function(){window.addEventListener('keydown',handleKeyDown);return function(){return window.removeEventListener('keydown',handleKeyDown);};},[power]);// Stop playing sound when power off\nuseEffect(stopSound,[power]);return/*#__PURE__*/_jsxs(\"button\",{style:active?drumPadActiveStyle:drumPadNormalStyle,type:\"button\",className:\"drum-pad\",id:\"\".concat(props.id,\"-pad\"),onMouseDown:handleClick,onMouseUp:handleDeactivate,onKeyDown:handleKeyDown,tabIndex:\"0\",children:[props.id,/*#__PURE__*/_jsx(\"audio\",{className:\"clip\",src:audioFiles[props.index],type:\"audio/wav\",id:props.id})]});}","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","updateDisplay","displayTextLibrary","drumPadActiveStyle","drumPadNormalStyle","DrumPad","props","useState","active","setActive","dispatch","state","audioFiles","libNum","volume","power","activatePad","id","elem","document","getElementById","currentTime","load","Number","play","handleClick","event","target","split","handleDeactivate","handleKeyDown","key","keyCode","toLowerCase","toUpperCase","setTimeout","stopSound","pause","window","addEventListener","removeEventListener","index"],"sources":["C:/Users/Lee Sze/Documents/fcc-frontend-lib-proj/drum_machine/drum_machine/src/components/DrumPad.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateDisplay } from '../actions/display'\r\nimport { displayTextLibrary } from '../utils/constants';\r\nimport { drumPadActiveStyle, drumPadNormalStyle } from '../utils/constants';\r\n\r\nexport default function DrumPad(props) {\r\n    // Local state to activate pad (for styling)\r\n    const [active, setActive]  = React.useState(false);\r\n\r\n    // Access audio files & volume state in Redux store\r\n    const dispatch = useDispatch();\r\n    const { libNum, audioFiles } = useSelector(state => state.audioFiles);\r\n    const volume = useSelector(state => state.volume);\r\n    const power = useSelector(state => state.power);\r\n    \r\n    // Function to play sound and update display text state upon activation\r\n    function activatePad(id) {\r\n        if (power) {\r\n            // Update display text\r\n            dispatch(updateDisplay(displayTextLibrary[libNum][id]))\r\n\r\n            const elem = document.getElementById(id);\r\n\r\n            // Load audio and volume, then play\r\n            elem.currentTime = 0;\r\n            elem.load();\r\n            elem.volume = Number(volume) / 100;\r\n            elem.play();\r\n        }\r\n\r\n        // Activate pad (for styling)\r\n        setActive(true)\r\n    }\r\n\r\n    // Function to activate pad on mouse down\r\n    function handleClick(event) {\r\n        let id = event.target.id.split('-')[0];\r\n        activatePad(id)\r\n    }\r\n\r\n    // Function to deactivate pad (for styling)\r\n    function handleDeactivate() {\r\n        setActive(false)\r\n    }\r\n\r\n    // Function to activate pad on key down\r\n    function handleKeyDown(event) {\r\n        var key = event.key;\r\n        var keyCode = props.id.toLowerCase();\r\n        \r\n        if(key === keyCode || key === keyCode.toUpperCase()) {\r\n            let id = key.toUpperCase();\r\n            activatePad(id)\r\n            setTimeout(() => setActive(false), 100)\r\n        }\r\n    }\r\n\r\n    // Function to stop audio playing\r\n    function stopSound() {\r\n        const elem = document.getElementById(props.id);\r\n        elem.pause();\r\n    }\r\n\r\n    // Listen/stop listening for keydown on power on/off\r\n    useEffect( () => {\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () =>  window.removeEventListener('keydown', handleKeyDown);\r\n    }, [power])\r\n\r\n    // Stop playing sound when power off\r\n    useEffect(stopSound, [power])\r\n\r\n    return (\r\n        <button style={active ? drumPadActiveStyle : drumPadNormalStyle} type=\"button\" className=\"drum-pad\"  id={`${props.id}-pad`}\r\n                onMouseDown={handleClick} onMouseUp={handleDeactivate} onKeyDown={handleKeyDown} tabIndex=\"0\">{props.id}\r\n            <audio className=\"clip\" src={audioFiles[props.index]} type=\"audio/wav\" id={props.id}>\r\n            </audio>\r\n        </button>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}